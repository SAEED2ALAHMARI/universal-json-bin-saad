let source;

function check() {
	if (typeof module === 'undefined') return;

	if (module.hot.status() === 'idle') {
		module.hot.check(true).then(modules => {
			console.log(`[SAPPER] applied HMR update`);
		});
	}
}

function connect(port) {
	if (source || !window.EventSource) return;

	source = new EventSource(`http://${window.location.hostname}:${port}/__sapper__`);

	window.source = source;

	source.onopen = function(event) {
		console.log(`[SAPPER] dev client connected`);
	};

	source.onerror = function(error) {
		console.error(error);
	};

	source.onmessage = function(event) {
		const data = JSON.parse(event.data);
		if (!data) return; // just a heartbeat

		if (data.action === 'reload') {
			window.location.reload();
		}

		if (data.status === 'completed') {
			check();
		}
	};

	// Close the event source before the window is unloaded to prevent an error
	// ("The connection was interrupted while the page was loading.") in Firefox
	// when the page is reloaded.
	window.addEventListener('beforeunload', function() {
		source.close();
	});
}

export { connect };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2FwcGVyLWRldi1jbGllbnQuODZkMDBmZDkuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3N2ZWx0ZS1yb2xsdXAvbm9kZV9tb2R1bGVzL3NhcHBlci9zYXBwZXItZGV2LWNsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgc291cmNlO1xuXG5mdW5jdGlvbiBjaGVjaygpIHtcblx0aWYgKHR5cGVvZiBtb2R1bGUgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cblx0aWYgKG1vZHVsZS5ob3Quc3RhdHVzKCkgPT09ICdpZGxlJykge1xuXHRcdG1vZHVsZS5ob3QuY2hlY2sodHJ1ZSkudGhlbihtb2R1bGVzID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKGBbU0FQUEVSXSBhcHBsaWVkIEhNUiB1cGRhdGVgKTtcblx0XHR9KTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29ubmVjdChwb3J0KSB7XG5cdGlmIChzb3VyY2UgfHwgIXdpbmRvdy5FdmVudFNvdXJjZSkgcmV0dXJuO1xuXG5cdHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZShgaHR0cDovLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfToke3BvcnR9L19fc2FwcGVyX19gKTtcblxuXHR3aW5kb3cuc291cmNlID0gc291cmNlO1xuXG5cdHNvdXJjZS5vbm9wZW4gPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGNvbnNvbGUubG9nKGBbU0FQUEVSXSBkZXYgY2xpZW50IGNvbm5lY3RlZGApO1xuXHR9O1xuXG5cdHNvdXJjZS5vbmVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0fTtcblxuXHRzb3VyY2Uub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcblx0XHRpZiAoIWRhdGEpIHJldHVybjsgLy8ganVzdCBhIGhlYXJ0YmVhdFxuXG5cdFx0aWYgKGRhdGEuYWN0aW9uID09PSAncmVsb2FkJykge1xuXHRcdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHRcdH1cblxuXHRcdGlmIChkYXRhLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcblx0XHRcdGNoZWNrKCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIENsb3NlIHRoZSBldmVudCBzb3VyY2UgYmVmb3JlIHRoZSB3aW5kb3cgaXMgdW5sb2FkZWQgdG8gcHJldmVudCBhbiBlcnJvclxuXHQvLyAoXCJUaGUgY29ubmVjdGlvbiB3YXMgaW50ZXJydXB0ZWQgd2hpbGUgdGhlIHBhZ2Ugd2FzIGxvYWRpbmcuXCIpIGluIEZpcmVmb3hcblx0Ly8gd2hlbiB0aGUgcGFnZSBpcyByZWxvYWRlZC5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uKCkge1xuXHRcdHNvdXJjZS5jbG9zZSgpO1xuXHR9KTtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLE1BQU0sQ0FBQztBQUNYO0FBQ0EsU0FBUyxLQUFLLEdBQUc7QUFDakIsQ0FBQyxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsRUFBRSxPQUFPO0FBQzNDO0FBQ0EsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEtBQUssTUFBTSxFQUFFO0FBQ3JDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSTtBQUN6QyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUM7QUFDOUMsR0FBRyxDQUFDLENBQUM7QUFDTCxFQUFFO0FBQ0YsQ0FBQztBQUNEO0FBQ08sU0FBUyxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQzlCLENBQUMsSUFBSSxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFLE9BQU87QUFDM0M7QUFDQSxDQUFDLE1BQU0sR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFDbkY7QUFDQSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3hCO0FBQ0EsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLFNBQVMsS0FBSyxFQUFFO0FBQ2pDLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLDZCQUE2QixDQUFDLENBQUMsQ0FBQztBQUMvQyxFQUFFLENBQUM7QUFDSDtBQUNBLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLEtBQUssRUFBRTtBQUNsQyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkIsRUFBRSxDQUFDO0FBQ0g7QUFDQSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxLQUFLLEVBQUU7QUFDcEMsRUFBRSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN0QyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTztBQUNwQjtBQUNBLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLFFBQVEsRUFBRTtBQUNoQyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDNUIsR0FBRztBQUNIO0FBQ0EsRUFBRSxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssV0FBVyxFQUFFO0FBQ25DLEdBQUcsS0FBSyxFQUFFLENBQUM7QUFDWCxHQUFHO0FBQ0gsRUFBRSxDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsV0FBVztBQUNwRCxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNqQixFQUFFLENBQUMsQ0FBQztBQUNKOzs7OyJ9
